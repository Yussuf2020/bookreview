version: '3.8'
services:
  mongo:
    image: mongo:latest
    volumes: [ mongo_data:/data/db ]
  backend:
    build: ./backend
    environment:
      - MONGO_URI=mongodb://mongo:27017/bookdb
    ports: ["5000:5000"]
    depends_on: [ mongo ]
  frontend:
    build: ./frontend
    ports: ["3000:3000"]
    depends_on: [ backend ]
volumes:
  mongo_data:
